 25. 2. 19 50분 1.2강
handshake
대상 네트워크가 wps 비활성화이거나, wps활성화 시에도 pbc 이용하는 설정으로 되어 있다면 wep에서 쓴 reaver가 먹히지 않는다.
또한 wpa와 wpa2에서는 해당 부분 보완해서 wep처럼 먹히지 않는다.
wpa2에서 키는 고유하고 임시의 값이묘 wep보다 길다.
또한 패킷에는 쓸만한 정보가 업어서 패킷을 캡쳐해도 키를 크랙할 수 없다.
핸드세이크 패킷은 네트워크에 연결하려는 클라이언트와 라우터 사이에 주고 받는 패킷이다.
이 패킷을 캡처하면 wpa, wpa2 키를 크랙할 수 있다.
우선 airodump-ng로 주변 네트워크를 확인
일단 해당 네트워크의 정보를 확인해야하기에
airodump-ng --bssid 11:22:33:44:55:66 --channel 1 --write wpa_handshake(핸드쉐이크 패킷이 파일로 저장) mon0
해당 네트워크르 스캔하고 캡쳐한 것을 파일에 기록
클라이언트와 라우터 사이에 패킷을 주고 받기를 기다려야 하는데 deauth(인증해제) 공격을 하게 되면 강제로 네트워크와 일시적 연결이 끊겨서 클라이언트는 자동으로 다시 연결하려 하는데 이 때 handshake 패킷이 발생
deauth 공격은
aireplay-ng --deauth 4(숫자만큼 연결해제 패킷을 보내기에 아주 짧은 시간만 끊기고, 짧아도 핸드세이크 패킷은 발생하기에 충분) -a 11:22:33:44:55:66 -c 11:22:33:44:55:66(연결을 끊을 클라이언트 맥주소로 airodump-ng에서 station 창하단에 표시) mon0
deauth 공격 직후 airodump-ng 창을 상단을 보면 전에 없던 wpa handshake 문구와 옆에 맥주소가 있다.
aireplay-ng는 무선네트워크 공격 도구로 패킷 인젝션을 주로 수행, deauth(강제 연결해제, -0), fake auth(가짜 인증, -1), arp replay(wep의 초기화백터를 수집, 암호화 키 크랙, -3) 등이 있다.
aireplay-ng는 무선 네트워크 어뎁터가 모니터 모드로 설정되어 있어야 한다.

handshake 패킷은 wpa키를 확보, 계산하는데 도움이 되진 않는다.
단지 비밀번호가 유효한가 아닌가 판단.

때문에 정확하지 않지만 추측 등을 통해 대량의 비밀번호를 만들어야한다. 이를 위해 사전파일 작업을 해야한다.
사전 파일은 대량의 텍스트 파일로 대량의 비밀번호를 담는다.
사전파일을 핸드셰이크 정보와 함께 이용해서 유효한 비밀번호를 찾아냄.
사전파일을 만드는 법
crunch라는 도구를 이용.
curnch[min, 최소글자수][max][characters]-t[paatern]-o[FileName]
ex)curnch 6 8 123abc$ -o wordlist -t a@@@@b
pattern은 위 예시처럼 a-b사이 4자리의 대량의 비밀번호를 만들어냄
ex) a1234b, accccb, a$dddb, accccccb(제시를 최대 8자리기에 가능)	 
man crunch라고 입력시 crunch라고 입력시 이용할 수 있는 다양한 정보가 나온다.
q를 누르면 빠져나올 수 있다.
crunch -p(p옵션은 중복되는 글자가 없게함.) 
curnch 6 8 abc12 -o test.txt 
이렇게 커맨드 입력시 test 파일에 패스워드들이 저장되는데 보고 싶으면 cat test.txt를 누르면 화면에 표시함.

